!function(){var e=e||{},t=t||{};t.ListItem=Backbone.Model.extend({defaults:function(){return{id:this.cid,name:"No-title",health:20}}}),t.List=Backbone.Collection.extend({url:"/back/index.php/health",model:t.ListItem}),e.Entry=Marionette.View.extend({template:"#user-entry",regions:new RegionSetter("about","actions"),className:"user",onRender:function(){this.getRegion("actions").show(new e.Actions),this.getRegion("about").show(new e.About)}}),e.Map=Marionette.View.extend({template:"#t-map",map:null,className:"mini-map",initialize:function(e){this.model=e.model},onAttach:function(){console.log(this.model),"undefined"!=typeof L&&(console.warn(this.map),null!=this.map&&this.map.remove(),this.triggerMethod("init:map"))},onInitMap:function(){var e=this,t={scrollWheelZoom:!1};this.map=L.map(this.el,t),L.tileLayer("http://85.188.8.254/back/IB_floorplan_72.53mx72.53m/{z}/{x}/{y}.png",{attribution:'&copy; <a target="_blank" href="http://tieto.com">Tieto</a>',minZoom:1,maxZoom:6,continuousWorld:!1,tms:!0,noWrap:!0}).addTo(this.map),dataset=this.model.attributes;var i=this.model.get("coordinates"),n=_.template($("#t-list-map-popup").html())(dataset),o=_.sample(["marker-success","marker-warning","marker-danger"]),a=L.divIcon({className:"marker "+o}),s=L.latLngBounds([[-180,-180],[180,180]]);this.map.setMaxBounds(s),this.map.on("drag",function(){e.map.panInsideBounds(s,{animate:!0})});var r=L.marker(i,{icon:a}).bindPopup(n);this.map.addLayer(r),this.map.setView(i,2)}}),t.About=Backbone.Model.extend({url:"/back/index.php/rating/1",defaults:function(){return{rating:3,name:"Nicole"}}}),e.About=Marionette.View.extend({tagName:"div",template:"#loading",className:"user-top",initialize:function(e){this.model=new t.About,this.model.fetch()},ui:{star:".glyphicon-star.super"},onRender:function(){this.template="#user-about"},onStartCheck:function(){var e=this;this.getUI("star").removeClass("go"),$.ajax({url:this.model.url+"/long",dataType:"json",success:function(t){1==t.delivered,e.getUI("star").addClass("go")},error:function(){alert("Sorry, we can not reach the server")},always:function(e){}})},onSync:function(){this.render(),this.triggerMethod("start:check")},modelEvents:{sync:"onSync"}}),e.Action=Marionette.View.extend({className:"list-group-item list-group-item-user",tagName:"li",template:"#user-action"}),e.Actions=Marionette.CollectionView.extend({className:"list-group",tagName:"ul",childView:e.Action,initialize:function(e){this.collection=new Backbone.Collection([{id:1,title:"Report an issue",description:"Pick from a list...",icon:"warning-sign"},{id:2,title:"Need tech support",description:"Choose a ... ",icon:"wrench"},{id:3,title:"Order a lunch",description:'Favorite cafeteria is <b>Floor 4, "Eat me!"</b>',icon:"cutlery"},{id:4,title:"Vote up for ...",description:null,icon:"thumbs-up"},{id:5,title:"Rate clealiness",description:"A <b>toilet</b> around your geo-position",icon:"star"}])},onChildviewOpenMap:function(e){console.log(e.model);var t=e.model;this.triggerMethod("show:marker",t)},onSync:function(){console.log(this.collection.models),this.render()},onRender:function(){}}),window.module_cleaner={View:e,Data:t,Entry:e.Entry}}();
//# sourceMappingURL=user-cleaner.js.map
