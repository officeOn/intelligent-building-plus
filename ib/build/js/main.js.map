{"version":3,"sources":["js/main.js"],"names":["height","width","left","top","_","random","delay","$","append","$el","find","css","url","kek","margin-left","margin-top","z-index","remove","RegionSetter","this","arguments","length","isArray","prefix","builder","prototype","regions","i","regionName","el","replaceElement","data","contacts","icon","name","id","users","balance","userName","userPic","History","Orders","View","App","Marionette","Application","initialize","console","Data","log","getRegion","extend","window","rootView","show","options","onStart","app","RootView","on","history","e","onChildviewClosePopup","onRender","empty","ContactsModel","Backbone","Model","defaults","ContactsCollection","model","className","Collection","triggers","ContactsItem","onContactMe","tag","childView","profession","CollectionView","collection","template","lastName","templateContext","title","Popup","onFadeOutPopup","addClass","triggerMethod","onClosePopup","_this","AboutMeView","_name","AboutMe","debug","content","Contacts","urlRoot","HistoryCollection","render","User","document","ready","getJSON","removeClass","attr","reload"],"mappings":"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","file":"main.js","sourcesContent":["var RegionSetter = function() {\r\n\tthis.arguments = arguments;\r\n\tif (this.arguments.length == 1 && _.isArray(this.arguments[0])) {\r\n\t\tthis.arguments = arguments[0]\r\n\t}\r\n\tthis.prefix = 'r-';\r\n\treturn this.builder()\r\n};\r\nRegionSetter.prototype.builder = function() {\r\n\tregions = {};\r\n\tfor (var i in this.arguments) {\r\n\t\tvar regionName = this.arguments[i]\r\n\t\tregions[regionName] = {\r\n\t\t\tel: this.prefix+regionName,\r\n\t\t\treplaceElement: true\r\n\t\t}\r\n\t}\r\n\treturn regions\r\n};\r\ndata = {\r\n\tcontacts :[\r\n\t\t{\r\n\t\t\ttitle: 'Вконтакте',\r\n\t\t\turl: 'https://vk.com/pavepy',\r\n\t\t},{\r\n\t\t\ttitle: 'Facebook',\r\n\t\t\turl: 'https://facebook.com/p.shchegolev',\r\n\t\t},{\r\n\t\t\ttitle: 'GitHub',\r\n\t\t\turl: 'https://github.com/carduelis',\r\n\t\t},{\r\n\t\t\ttitle: 'GitHub pages',\r\n\t\t\turl: 'http://carduelis.github.io'\r\n\t\t},{\r\n\t\t\ttitle: 'Twitter',\r\n\t\t\turl: 'http://carduelis.github.io'\r\n\t\t},{\r\n\t\t\ttitle: '+79055332433',\r\n\t\t\ticon: 'phone',\r\n\t\t\turl: 'tel:+79055332433'\r\n\t\t},{\r\n\t\t\ttitle: 'pavepy@gmail.com',\r\n\t\t\ticon: 'pencil',\r\n\t\t\turl: 'mailto:pavepy@gmail.com'\r\n\t\t}\r\n\t],\r\n\troles: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: 'Guest',\r\n\t\t\tcode: 'guest'\r\n\t\t},{\r\n\t\t\tid: 2,\r\n\t\t\tname: 'Courier',\r\n\t\t\tcode: 'courier'\r\n\t\t},{\r\n\t\t\tid: 3,\r\n\t\t\tname: 'Employee',\r\n\t\t\tcode: 'employee'\r\n\t\t},{\r\n\t\t\tid: 4,\r\n\t\t\tname: 'Cleaning manager',\r\n\t\t\tcode: 'clean'\r\n\t\t}\r\n\t],\r\n\tusers: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tuserName: 'Иван Иванов',\r\n\t\t\tuserPic: 'http://placecage.com/100/100',\r\n\t\t\tbalance: 200,\r\n\t\t\ttotalOrders: 5\r\n\t\t},{\r\n\t\t\tid: 2,\r\n\t\t\tuserName: 'Петр Кузнецов',\r\n\t\t\tuserPic: 'http://placecage.com/101/101',\r\n\t\t\tbalance: 1200,\r\n\t\t\ttotalOrders: 3\r\n\t\t},{\r\n\t\t\tid: 3,\r\n\t\t\tuserName: 'Константин Константинопольский',\r\n\t\t\tuserPic: 'http://placecage.com/99/99',\r\n\t\t\tbalance: -575,\r\n\t\t\ttotalOrders: 4\r\n\t\t}\r\n\t]\r\n}\r\nvar History = History || {};\r\nHistory.View = History.View || {}; \r\nHistory.Data = History.Data || {};\r\n\r\nvar Orders = Orders || {};\r\nOrders.View = Orders.View || {};\r\nOrders.Data = Orders.Data || {};\r\n\r\nvar App = Marionette.Application.extend({\r\n\tregion: '#app',\r\n\tinitialize: function(options) {\r\n\t\tconsole.log('My options:', options);\r\n\t},\r\n\tonStart: function() {\r\n\t\tconsole.log(this.getRegion());\r\n\t\twindow.rootView = new RootView();\r\n\t\tthis.getRegion().show(rootView);\r\n\t\t// this.showView(new RootView()); // are the same\r\n\t},\r\n\r\n});\r\napp = new App();\r\napp.on('start', \t\t(app,options) => {\r\n\tconsole.log(app,options);\r\n\r\n\r\n\tBackbone.history.start();\r\n});\r\napp.on('before:start', \t(e) => console.log(e));\r\nRootView = Marionette.View.extend({\r\n\ttemplate: '#t-app',\r\n\tregions: new RegionSetter('popup','breadcrumbs','content','notify'),\r\n\tonRender: function () {\r\n\t},\r\n\r\n\tonChildviewClosePopup: function() {\r\n\t\trootView.getRegion('popup').empty();\r\n\t}\r\n});\r\nvar ContactsModel = Backbone.Model.extend({\r\n\tdefaults : function() {\r\n\t\treturn {\r\n\t\t\ticon: 'ok',\r\n\t\t\ttitle: 'Связаться',\r\n\t\t\turl: null\r\n\t\t}\r\n\t}\r\n})\r\nvar ContactsCollection = Backbone.Collection.extend({\r\n\tmodel: ContactsModel,\r\n});\r\nvar ContactsItem = Marionette.View.extend({\r\n\ttemplate: '#t-me-contacts-item',\r\n\ttag: 'li',\r\n\tclassName: 'contact-item',\r\n\ttriggers: {\r\n\t\t'click' : 'contact:me'\r\n\t},\r\n\tonContactMe : function(){\r\n\r\n\t},\r\n});\r\n\r\n\r\n\r\n\r\nvar Contacts = Marionette.CollectionView.extend({\r\n\tchildView: ContactsItem,\r\n\tcollection: new ContactsCollection(data.contacts)\r\n});\r\n\r\nvar AboutMe = Backbone.Model.extend({\r\n\tdefaults : function() {\r\n\t\treturn {\r\n\t\t\tfirstName: 'Pavel',\r\n\t\t\tlastName: 'Shchegolev',\r\n\t\t\tavatar: '//placecage.com/150/150',\r\n\t\t\tprofession: 'Front-end web developer'\r\n\t\t}\r\n\t}\r\n});\r\nvar Popup = Marionette.View.extend({\r\n\ttemplate: '#popup',\r\n\tclassName: 'fixed-popup',\r\n\tregions: new RegionSetter('content'),\r\n\tinitialize: function(options) {\r\n\t\tthis.templateContext = {\r\n\t\t\ttitle: options.title\r\n\t\t};\r\n\t},\r\n\ttriggers: {\r\n\t\t'click [data-action=\"close\"]' : 'fade:out:popup'\r\n\t},\r\n\tonFadeOutPopup : function() {\r\n\t\tthis.$el.addClass('fadeout');\r\n\t\t_.delay(()=>{\r\n\t\t\tthis.triggerMethod('close:popup')\r\n\t\t},1000)\r\n\t},\r\n\tonClosePopup : function() {\r\n\r\n\t},\r\n\tonRender: function() {\r\n\t\tthis.getRegion('content').show(this.options.content)\r\n\t}\r\n});\r\nvar AboutMeView = Marionette.View.extend({\r\n\t_name: 'AboutMeView',\r\n\ttemplate: '#t-me',\r\n\tclassName: 'about',\r\n\tmodel: new AboutMe(),\r\n \tinitialize: function(options) {\r\n \t\tconsole.debug(this._name);\r\n \t\tconsole.debug(this.model);\r\n \t\t_.extend(this,options);\r\n \t},\r\n \tregions: {\r\n \t\tcontacts: '.contacts'\r\n \t},\r\n\t\r\n\tonRender: function () {\r\n\t\tthis.getRegion('contacts').show(new Contacts());\r\n\t}\r\n});\r\n\r\nHistory.Data.Model = Backbone.Model.extend({\r\n\t_name: 'User model',\r\n\tdefaults: function() {\r\n\t\treturn {\r\n\t\t\tid: this.id, \r\n\t\t\tuserName: 'Иванов Иван',\r\n\t\t\tuserPic: 'http://placecage.com/200/200',\r\n\t\t\tbalance: 200,\r\n\t\t\ttotalOrders: 5\r\n\t\t}\r\n\t},\r\n\tinitialize : function() {\r\n\t\tconsole.log(this.url());\r\n\t},\r\n\r\n});\r\n\r\n\r\nHistory.Data.Collection = Backbone.Collection.extend({\r\n\tmodel: History.Data.Model,\t\r\n\turlRoot: '/',\r\n\tinitialize: function(options) {\r\n\t\tthis.url = this.urlRoot + options.url;\r\n\t},\r\n});\r\nHistory.View.User = Marionette.View.extend({\r\n\t_name: 'History.View',\r\n\tclassName: 'user',\r\n\ttemplate: '#t-user-snippet',\r\n \tinitialize: function(options) {\r\n \t\tconsole.debug(this._name);\r\n \t\t_.extend(this,options);\r\n \t},\r\n\tonRender: function() {\r\n\t\t// this.getRegion('input').show(this.input(this.model))\r\n\t}\r\n});\r\nHistory.View.HistoryCollection = Marionette.CollectionView.extend({\r\n\tchildView: History.View.User,\r\n\tcollection: new History.Data.Collection(data.users),\r\n\tinitialize: function (options) {\r\n\t\tconsole.log(options);\r\n\t\tconsole.log(this.childView);\r\n\t\tthis.render();\r\n\t}\r\n});\r\n\r\n\r\n// Orders.View.Order = Marionette.View.extend({\r\n// \t_name: 'Users.View',\r\n// \tclassName: 'user',\r\n// \ttemplate: '#t-user-snippet',\r\n//  \tinitialize: function(options) {\r\n//  \t\tconsole.debug(this._name);\r\n//  \t\t_.extend(this,options);\r\n//  \t},\r\n// \tonRender: function() {\r\n// \t\t// this.getRegion('input').show(this.input(this.model))\r\n// \t}\r\n// });\r\n// Orders.View.OrderCollection = Marionette.CollectionView.extend({\r\n// \tchildView: Orders.View.Order,\r\n// \tcollection: new Orders.Data.Collection([{\r\n// \t\tid: 1,\r\n// \t\tuserName: 'Иван Иванов',\r\n// \t\tuserPic: 'http://placecage.com/100/100',\r\n// \t\tbalance: 200,\r\n// \t\ttotalOrders: 5\r\n// \t},{\r\n// \t\tid: 2,\r\n// \t\tuserName: 'Петр Кузнецов',\r\n// \t\tuserPic: 'http://placecage.com/101/101',\r\n// \t\tbalance: 1200,\r\n// \t\ttotalOrders: 3\r\n// \t},{\r\n// \t\tid: 3,\r\n// \t\tuserName: 'Константин Константинопольский',\r\n// \t\tuserPic: 'http://placecage.com/99/99',\r\n// \t\tbalance: -575,\r\n// \t\ttotalOrders: 4\r\n// \t}]),\r\n// \tinitialize: function (options) {\r\n// \t\tconsole.log(options);\r\n// \t\tconsole.log(this.childView);\r\n// \t\tthis.render();\r\n// \t}\r\n// });\r\n\r\n\r\n\r\n$(document).ready(function () {\r\n\t$.getJSON('/back/index.php/session_data', function(data){\r\n\t\tconsole.warn(data.id);\r\n\t\tapp.access = data;\r\n\t\t$('[data-action=\"account\"][data-id=\"'+data.id+'\"]').addClass('active');\r\n\t\tapp.start();\r\n\t});\r\n\t$('[data-action=\"account\"]').on('click', function(){\r\n\t\t$('[data-action=\"account\"]').removeClass('active');\r\n\t\tvar id = $(this).attr('data-id');\r\n\t\t$.get('/back/index.php/session_data/'+id, (data) => {\r\n\t\t\twindow.location.reload();\r\n\t\t})\r\n\t});\r\n});\r\n\r\n\r\nfunction kek(height, width, left, top) {\r\n\tvar height = _.random(200,400);\r\n\tvar width = _.random(200,400);\r\n\tvar left = _.random(20,70);\r\n\tvar top = _.random(20,70);\r\n\t_.delay(function() {\r\n\t\t// if (_.random(228, 420) === 420) {\r\n\t\t$('body').append('<div class=\"kek'+height+'\"></div>');\r\n\t\t$el = $('body').children('.kek'+height);\r\n\t\tvar url = 'http://placecage.com/'+width+'/'+height;\r\n\t\t$el.append('<img src=\"'+url+'\">')\r\n\t\tvar css = function() {return{\r\n\t\t\tposition: 'fixed',\r\n\t\t\twidth: width+'px',\r\n\t\t\theight: height+'px',\r\n\t\t\tleft: left+'%',\r\n\t\t\t'margin-left': '-'+width/2+'px',\r\n\t\t\t'margin-top': '-'+height/2+'px',\r\n\t\t\ttop: top+'%',\r\n\t\t\t'z-index': 999\r\n\t\t}}\r\n\t\t$el.find('img').css(css());\r\n\t\t_.delay(function(){\r\n\t\t\t$el.remove();\r\n\t\t}, 2000);\r\n\t\tkek();\r\n\t}, 3000);\r\n};\r\n\r\n// kek();"]}